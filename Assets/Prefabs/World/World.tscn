[gd_scene format=3 uid="uid://q3d8f588rgns"]

[ext_resource type="Script" uid="uid://c0j83efpa6svk" path="res://Assets/Prefabs/World/World.cs" id="1_yd2wk"]
[ext_resource type="Script" uid="uid://c43nx6mgcq070" path="res://Source/Game/Common/WaveManager.cs" id="2_oturc"]
[ext_resource type="Material" uid="uid://dmlwnkxbtvg3x" path="res://Assets/Prefabs/World/Water.tres" id="2_xtsie"]
[ext_resource type="Script" uid="uid://dxuxfcosntln8" path="res://Assets/Prefabs/World/WorldArea.cs" id="3_t3kjs"]
[ext_resource type="PackedScene" uid="uid://dkml08sjkleg4" path="res://Source/Game/Player/Player.tscn" id="4_623ao"]
[ext_resource type="PackedScene" uid="uid://ci45mqkirclcs" path="res://Source/Game/Player/UserInterface/HeadsUpDisplay.tscn" id="4_e7xia"]
[ext_resource type="Texture2D" uid="uid://cq1t40fvsl5qw" path="res://Assets/Textures/SpriteSheets/SandTile.png" id="5_1kdbj"]
[ext_resource type="Script" uid="uid://cwio4re8cg5yy" path="res://Source/Game/Mobs/TideSpawner.cs" id="6_623ao"]
[ext_resource type="PackedScene" uid="uid://djyxbr83svaxk" path="res://Assets/Prefabs/EnvironmentalEffects/Tide/Tide.tscn" id="7_el5su"]
[ext_resource type="PackedScene" uid="uid://ikyjpejn77y5" path="res://Assets/Prefabs/EnvironmentalEffects/WhirlPool/WhirlPool.tscn" id="8_06g14"]
[ext_resource type="PackedScene" uid="uid://du7figp5hhtgb" path="res://Assets/Prefabs/EnvironmentalEffects/BigTide/BigTide.tscn" id="9_p0tfn"]
[ext_resource type="PackedScene" uid="uid://dd1txusb8iduc" path="res://Assets/Prefabs/Mobs/Seagull/Seagull.tscn" id="9_r0y47"]
[ext_resource type="Script" uid="uid://ckum0efkn2yxu" path="res://Source/Game/Mobs/MobSpawner.cs" id="11_umx5j"]
[ext_resource type="PackedScene" uid="uid://dvpo7welfd08k" path="res://Assets/Prefabs/Mobs/FlyingFish/FlyingFish.tscn" id="13_oas45"]
[ext_resource type="PackedScene" uid="uid://by5pr3oyf568c" path="res://Assets/Prefabs/Mobs/Shark/Shark.tscn" id="14_35grn"]
[ext_resource type="Script" uid="uid://c4hau6on8128m" path="res://Assets/Prefabs/World/NavigationRegion2d.cs" id="15_06g14"]
[ext_resource type="PackedScene" uid="uid://bxxge54kolwnt" path="res://Assets/Prefabs/Mobs/Orca/Orca.tscn" id="15_ho2l3"]
[ext_resource type="PackedScene" uid="uid://b1luavxt1vbwu" path="res://Source/Game/Menus/PauseMenu.tscn" id="16_el5su"]
[ext_resource type="PackedScene" uid="uid://bxx2uro5uusm8" path="res://Assets/Prefabs/Mobs/Squid/Squid.tscn" id="16_mhsty"]
[ext_resource type="PackedScene" uid="uid://cva0u7ipnqfff" path="res://Assets/Prefabs/Mobs/MobyDick/MobyDick.tscn" id="17_kjd0a"]
[ext_resource type="Script" uid="uid://dvghxmu71ww70" path="res://Assets/Prefabs/World/Camera2d.cs" id="18_80nep"]
[ext_resource type="Resource" uid="uid://cu0fveekgl5av" path="res://Assets/Prefabs/Mobs/Seagull/Seagull.tres" id="18_oas45"]
[ext_resource type="Resource" uid="uid://0a2wjt102lxt" path="res://Assets/Prefabs/Mobs/FlyingFish/FlyingFish.tres" id="19_310j2"]
[ext_resource type="Resource" uid="uid://cggpr84jerywt" path="res://Assets/Prefabs/Mobs/Shark/Shark.tres" id="20_i3mwb"]
[ext_resource type="Resource" uid="uid://c5wy4gx0wgvit" path="res://Assets/Prefabs/Mobs/Orca/Orca.tres" id="21_k3vpf"]
[ext_resource type="AudioStream" uid="uid://cysxmuymj7l7q" path="res://Assets/Audio/SoundEffects/thunderstorm.wav" id="21_umx5j"]
[ext_resource type="Resource" uid="uid://cximyjf5l6kf0" path="res://Assets/Prefabs/Mobs/Squid/Squid.tres" id="22_pv4c0"]
[ext_resource type="Script" uid="uid://bbb7v800qtjrr" path="res://Source/Game/Common/MusicManager.cs" id="23_cyq2m"]
[ext_resource type="Resource" uid="uid://bfaxt1i4x2s01" path="res://Assets/Prefabs/Mobs/MobyDick/MobyDick.tres" id="23_djkq8"]
[ext_resource type="AudioStream" uid="uid://dienrgu3t4klv" path="res://Assets/Audio/Music/intro_0.wav" id="24_5vhjp"]
[ext_resource type="AudioStream" uid="uid://bsbixpvb3tx3d" path="res://Assets/Audio/Music/intro_1.wav" id="25_e83yc"]
[ext_resource type="AudioStream" uid="uid://cfnjsl1esxryt" path="res://Assets/Audio/Music/combat_0.wav" id="26_cp13i"]
[ext_resource type="AudioStream" uid="uid://b828go5xik804" path="res://Assets/Audio/Music/combat_1.wav" id="27_odwwp"]

[sub_resource type="Gradient" id="Gradient_623ao"]
interpolation_mode = 2
interpolation_color_space = 1
offsets = PackedFloat32Array(0.14666666, 0.34666666, 0.75333333)
colors = PackedColorArray(0, 0.08078883, 0.99999183, 1, 0, 0.14528143, 0.77687883, 1, 0, 0, 0.30980393, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_nap3e"]
gradient = SubResource("Gradient_623ao")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_7ey30"]
size = Vector2(3840, 2160)

[sub_resource type="NavigationPolygon" id="NavigationPolygon_623ao"]
vertices = PackedVector2Array(1270, 711, 10, 711, 10, 10, 1270, 10)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3)])
outlines = Array[PackedVector2Array]([PackedVector2Array(0, 0, 1280, 0, 1280, 721, 0, 721)])

[node name="World" type="Node2D" unique_id=2101262327]
process_mode = 1
script = ExtResource("1_yd2wk")

[node name="Water" type="TextureRect" parent="." unique_id=1883821968]
material = ExtResource("2_xtsie")
offset_right = 3840.0
offset_bottom = 2160.0
texture = SubResource("GradientTexture1D_nap3e")
metadata/_edit_use_anchors_ = true

[node name="WorldBorder" type="Polygon2D" parent="." unique_id=583730806]
modulate = Color(0.65012825, 0.6501283, 0.65012825, 1)
z_index = 1
texture_repeat = 2
antialiased = true
texture = ExtResource("5_1kdbj")
polygon = PackedVector2Array(4083, -119, 3956, 2300, 26, 2208, 1, 2158, 135, 2123, 290, 2157, 704, 2135, 1337, 2168, 1639, 2124, 1952, 2148, 2578, 2163, 2895, 2156, 3229, 2131, 3632, 2140, 3821, 2160, 3766, 1949, 3842, 1691, 3828, 1276, 3821, 1106, 3838, 567, 3830, 132, 3768, 27, 2258, -5, 1425, 24, 998, 17, 576, 12, 161, 28, 126, 22, 12, 28, 21, 79, 6, 139, 10, 182, 21, 411, 9, 623, 9, 1200, 21, 1873, 1, 2158, 26, 2208, -60, 2169, -171, 1172, -248, -230)

[node name="CanvasLayer" type="CanvasLayer" parent="." unique_id=229683983]
layer = 0

[node name="WorldArea" type="Area2D" parent="CanvasLayer" unique_id=1907954944 node_paths=PackedStringArray("_bounds", "_shape", "_water")]
script = ExtResource("3_t3kjs")
_bounds = NodePath("WorldBounds/CollisionPolygon2D")
_shape = NodePath("CollisionShape2D")
_water = NodePath("../../Water")

[node name="CollisionShape2D" type="CollisionShape2D" parent="CanvasLayer/WorldArea" unique_id=1205411583]
position = Vector2(2420, 839)
shape = SubResource("RectangleShape2D_7ey30")

[node name="WorldBounds" type="StaticBody2D" parent="CanvasLayer/WorldArea" unique_id=1819030490]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="CanvasLayer/WorldArea/WorldBounds" unique_id=1878712237]
build_mode = 1
polygon = PackedVector2Array(0, 0, 1280, 0, 1280, 720, 0, 720)

[node name="HeadsUpDisplay" parent="CanvasLayer" unique_id=514953512 instance=ExtResource("4_e7xia")]

[node name="WaveManager" type="Node" parent="." unique_id=5672404 node_paths=PackedStringArray("_tideSpawner", "_mobSpawner")]
script = ExtResource("2_oturc")
_tideSpawner = NodePath("TideSpawner")
_mobSpawner = NodePath("MobSpawner")

[node name="TideSpawner" type="Node2D" parent="WaveManager" unique_id=1525771899 node_paths=PackedStringArray("_worldBounds")]
script = ExtResource("6_623ao")
_worldBounds = NodePath("../../CanvasLayer/WorldArea/CollisionShape2D")
_environmentalEffects = Array[PackedScene]([ExtResource("7_el5su"), ExtResource("8_06g14"), ExtResource("9_p0tfn")])

[node name="SpawnTimer" type="Timer" parent="WaveManager/TideSpawner" unique_id=498978494]
wait_time = 4.5
autostart = true

[node name="MobSpawner" type="Node2D" parent="WaveManager" unique_id=1409845917 node_paths=PackedStringArray("_worldBounds")]
script = ExtResource("11_umx5j")
_worldBounds = NodePath("../../CanvasLayer/WorldArea/CollisionShape2D")
_enemyTypes = Array[PackedScene]([ExtResource("9_r0y47"), ExtResource("13_oas45"), ExtResource("14_35grn"), ExtResource("15_ho2l3"), ExtResource("16_mhsty"), ExtResource("17_kjd0a")])
_tierDefinitions = Array[Resource]([ExtResource("18_oas45"), ExtResource("19_310j2"), ExtResource("20_i3mwb"), ExtResource("21_k3vpf"), ExtResource("22_pv4c0"), ExtResource("23_djkq8")])

[node name="SpawnInterval" type="Timer" parent="WaveManager/MobSpawner" unique_id=79966144]
wait_time = 2.5
autostart = true

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="WaveManager/MobSpawner" unique_id=1917607453]
navigation_polygon = SubResource("NavigationPolygon_623ao")
script = ExtResource("15_06g14")

[node name="PauseMenu" parent="." unique_id=1206998150 instance=ExtResource("16_el5su")]
process_mode = 3
visible = false

[node name="Player" parent="." unique_id=1941445661 instance=ExtResource("4_623ao")]
position = Vector2(640, 360)

[node name="Camera2D" type="Camera2D" parent="Player" unique_id=522788235]
limit_left = 0
limit_top = 0
limit_right = 1280
limit_bottom = 720
script = ExtResource("18_80nep")

[node name="WorldAmbience" type="AudioStreamPlayer" parent="." unique_id=350663869]
stream = ExtResource("21_umx5j")
volume_db = -8.0
autoplay = true

[node name="MusicManager" type="Node" parent="." unique_id=1166709408]
script = ExtResource("23_cyq2m")
_introThemes = Array[AudioStream]([ExtResource("24_5vhjp"), ExtResource("25_e83yc")])
_combatThemes = Array[AudioStream]([ExtResource("26_cp13i"), ExtResource("27_odwwp")])

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="MusicManager" unique_id=1134828384]
