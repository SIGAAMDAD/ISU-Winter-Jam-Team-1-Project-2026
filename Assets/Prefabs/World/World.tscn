[gd_scene load_steps=19 format=3 uid="uid://q3d8f588rgns"]

[ext_resource type="Script" uid="uid://c0j83efpa6svk" path="res://Assets/Prefabs/World/World.cs" id="1_yd2wk"]
[ext_resource type="Script" uid="uid://c43nx6mgcq070" path="res://Source/Game/Common/WaveManager.cs" id="2_oturc"]
[ext_resource type="Material" uid="uid://dmlwnkxbtvg3x" path="res://Assets/Prefabs/World/Water.tres" id="2_xtsie"]
[ext_resource type="Script" uid="uid://dxuxfcosntln8" path="res://Assets/Prefabs/World/WorldArea.cs" id="3_t3kjs"]
[ext_resource type="PackedScene" uid="uid://dkml08sjkleg4" path="res://Source/Game/Player/Player.tscn" id="4_623ao"]
[ext_resource type="PackedScene" uid="uid://ci45mqkirclcs" path="res://Source/Game/Player/UserInterface/HeadsUpDisplay.tscn" id="4_e7xia"]
[ext_resource type="Script" uid="uid://cwio4re8cg5yy" path="res://Source/Game/Mobs/TideSpawner.cs" id="6_623ao"]
[ext_resource type="Script" uid="uid://ckum0efkn2yxu" path="res://Source/Game/Mobs/MobSpawner.cs" id="7_nap3e"]
[ext_resource type="Script" uid="uid://dj6due7fgidad" path="res://Source/Game/Common/EntityManager.cs" id="8_e662y"]
[ext_resource type="Script" uid="uid://bvsjkqk8ngfhl" path="res://Source/Game/Player/Upgrades/UpgradeManager.cs" id="10_7ey30"]
[ext_resource type="PackedScene" uid="uid://by5pr3oyf568c" path="res://Assets/Prefabs/Mobs/Shark/Shark.tscn" id="11_yrfwb"]
[ext_resource type="PackedScene" uid="uid://dvpo7welfd08k" path="res://Assets/Prefabs/Mobs/FlyingFish/FlyingFish.tscn" id="12_6tp7i"]
[ext_resource type="PackedScene" uid="uid://bxxge54kolwnt" path="res://Assets/Prefabs/Mobs/Orca/Orca.tscn" id="13_6tp7i"]
[ext_resource type="PackedScene" uid="uid://bxx2uro5uusm8" path="res://Assets/Prefabs/Mobs/Squid/Squid.tscn" id="14_r0y47"]

[sub_resource type="Gradient" id="Gradient_623ao"]
offsets = PackedFloat32Array(0.013333334)
colors = PackedColorArray(0, 0, 1, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_nap3e"]
gradient = SubResource("Gradient_623ao")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_7ey30"]
size = Vector2(1280, 721)

[sub_resource type="NavigationPolygon" id="NavigationPolygon_623ao"]
vertices = PackedVector2Array(1270, 711, 10, 711, 10, 10, 1270, 10)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3)])
outlines = Array[PackedVector2Array]([PackedVector2Array(0, 0, 1280, 0, 1280, 721, 0, 721)])

[node name="World" type="Node2D"]
script = ExtResource("1_yd2wk")

[node name="CanvasLayer" type="CanvasLayer" parent="."]
layer = -10

[node name="Water" type="TextureRect" parent="CanvasLayer"]
unique_name_in_owner = true
material = ExtResource("2_xtsie")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
texture = SubResource("GradientTexture1D_nap3e")
metadata/_edit_use_anchors_ = true

[node name="WorldArea" type="Area2D" parent="CanvasLayer"]
script = ExtResource("3_t3kjs")

[node name="CollisionShape2D" type="CollisionShape2D" parent="CanvasLayer/WorldArea"]
position = Vector2(640, 360.5)
shape = SubResource("RectangleShape2D_7ey30")

[node name="WorldBounds" type="StaticBody2D" parent="CanvasLayer"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="CanvasLayer/WorldBounds"]
build_mode = 1
polygon = PackedVector2Array(1280, 0, 0, 0, 0, 721, 1280, 721)

[node name="HeadsUpDisplay" parent="CanvasLayer" instance=ExtResource("4_e7xia")]

[node name="UpgradeManager" type="CanvasLayer" parent="CanvasLayer"]
script = ExtResource("10_7ey30")

[node name="Player" parent="." instance=ExtResource("4_623ao")]
y_sort_enabled = true
position = Vector2(640, 360)

[node name="Camera2D" type="Camera2D" parent="Player"]
limit_left = 0
limit_top = 0
limit_right = 1280
limit_bottom = 720

[node name="TideSpawner" type="Node2D" parent="." node_paths=PackedStringArray("_worldBounds")]
script = ExtResource("6_623ao")
_worldBounds = NodePath("../CanvasLayer/WorldArea/CollisionShape2D")

[node name="SpawnTimer" type="Timer" parent="TideSpawner"]
wait_time = 4.5
autostart = true

[node name="WaveManager" type="Node" parent="."]
script = ExtResource("2_oturc")

[node name="WaveTimer" type="Timer" parent="WaveManager"]
wait_time = 15.0
autostart = true

[node name="EntityManager" type="Node" parent="." node_paths=PackedStringArray("_player")]
script = ExtResource("8_e662y")
_player = NodePath("../Player")

[node name="MobSpawner" type="Node2D" parent="." node_paths=PackedStringArray("_worldBounds")]
script = ExtResource("7_nap3e")
_worldBounds = NodePath("../CanvasLayer/WorldArea/CollisionShape2D")
_enemyTypes = Array[PackedScene]([ExtResource("12_6tp7i"), ExtResource("11_yrfwb"), ExtResource("13_6tp7i"), ExtResource("14_r0y47")])

[node name="SpawnInterval" type="Timer" parent="MobSpawner"]
wait_time = 3.5
autostart = true

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="MobSpawner"]
navigation_polygon = SubResource("NavigationPolygon_623ao")
